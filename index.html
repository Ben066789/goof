<!doctype html>
<html>
<head>
<title>for my special someone</title>
<style>
    body {
        margin: 0;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        /* font-family: Arial, sans-serif; */
        flex-direction: column;
        background: url('./assets/pinkRose.gif') repeat center center;
        transition: background 0.5s;
    }

    body.rejected {
        background: black;
    }

    body.accepted {
        background: #D97D92;
    }


    #container {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    #love-gif-2 {
        width: 300px;
        opacity: 0;
        transform: scale(0.2);
        display: none;
    }

    @keyframes growFade {
        from {
        transform: scale(0.2);
        opacity: 0;
        }
        to {
        transform: scale(1.5);
        opacity: 1;
        }
    }

    .overlay {
        position: absolute;
        top: -130px;
        right: -300px;
        background: white;
        padding: 20px;
        border: 3px solid #D97D92;
        border-radius: 20px;
        width: 280px;
        text-align: center;
        opacity: 0;
        display: none;
        z-index: 10;
    }

    .overlay.show {
        animation: fadeIn 1s forwards;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .overlay::after {
        content: "";
        position: absolute;
        bottom: -20px;
        left: 20px;
        border-width: 20px 20px 0 0;
        border-style: solid;
        border-color: #D97D92 transparent transparent transparent;
    }

    .overlay::before {
        content: "";
        position: absolute;
        bottom: -17px;
        left: 23px;
        border-width: 17px 17px 0 0;
        border-style: solid;
        border-color: #D97D92 transparent transparent transparent;
    }

    .buttons {
        margin-top: 15px;
    }

    .buttons button {
        margin: 0 5px;
        padding: 8px 20px;
        cursor: pointer;
        border: 2px solid #D97D92;
        background: white;
        border-radius: 5px;
        font-weight: bold;
    }

    .buttons button:hover {
        background: #D97D92;
        color: white;
    }

    #typingText {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: red;
        font-size: 20px;
        /* font-family: 'Courier New', monospace; */
        text-align: left;
        max-width: 90%;
        display: none;
        z-index: 100;
        line-height: 1.6;
        white-space: pre-wrap;
    }

    #formContainer {
        background: white;
        padding: 40px;
        border-radius: 20px;
        border: 3px solid #D97D92;
        max-width: 400px;
        text-align: center;
    }

    #formContainer h1 {
        color: #D97D92;
        margin-bottom: 20px;
    }

    #formContainer input, #formContainer textarea {
        width: 100%;
        padding: 12px;
        margin: 10px 0;
        border: 2px solid #D97D92;
        border-radius: 8px;
        font-size: 14px;
        box-sizing: border-box;
    }

    #formContainer button {
        padding: 12px 30px;
        margin-top: 15px;
        background: #D97D92;
        color: white;
        border: none;
        border-radius: 8px;
        /* font-weight: bold; */
        cursor: pointer;
        font-size: 16px;
    }

    #formContainer button:hover {
        background: #c46a7e;
    }

    #linkResult {
        margin-top: 20px;
        padding: 15px;
        background: #f0f0f0;
        border-radius: 8px;
        display: none;
    }

    #linkResult input {
        width: 100%;
        padding: 10px;
        margin-top: 10px;
        border: 2px solid #D97D92;
        border-radius: 5px;
        font-size: 12px;
    }

    #linkResult button {
        margin-top: 10px;
        padding: 8px 20px;
        background: #D97D92;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    .valentine-page {
        display: none;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
    }

    #yesCard {
        font-size: 20px;
        line-height: 1;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        border: 3px solid #D97D92;
        border-radius: 16px;
        padding: 20px 24px;
        width: 260px;
        text-align: center;
        display: none;
        z-index: 200;
    }

    #yesCard.show {
        display: block;
        animation: popIn 0.25s ease-out;
    }

    @keyframes popIn {
        from { transform: translate(-50%, -50%) scale(0.85); opacity: 0; }
        to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

    .marquee-lane {
        width: 100%;
        height: 120px;
        overflow: hidden;
        position: relative;
        pointer-events: none;
    }

    .marquee-item {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 260px;
        height: 120px;
        animation-timing-function: linear;
        animation-iteration-count: 1;
        will-change: left;
    }

    .marquee-item.move-left {
        animation-name: moveLeft;
    }

    .marquee-item.move-right {
        animation-name: moveRight;
    }

    @keyframes moveLeft {
        from { left: 100%; }
        to { left: -140px; }
    }

    @keyframes moveRight {
        from { left: -140px; }
        to { left: 100%; }
    }
</style>
</head>

<body>
<div class="marquee-wrapper" id="marqueeWrapper" style="display: none; width: 100%;">
    <div class="marquee-lane" id="marqueeLaneTop"></div>
    <div class="marquee-lane" id="marqueeLaneMid"></div>
</div>
<div id="formContainer">
    <h1>message for your special someone</h1>
    <form id="valentineForm">
        <input type="text" id="targetName" placeholder="your special someone" required>
        <input type="text" id="senderName" placeholder="your name" required>
        <button type="submit">Generate Link</button>
    </form>
    <div id="linkResult">
        <p><strong>Share this link:</strong></p>
        <input type="text" id="generatedLink" readonly>
        <button id="copyBtn">Copy Link</button>
    </div>
</div>

<div class="valentine-page">
    <button style="padding: 50px; font-size: 25px; border-radius: 15px;" id="openBtn">open me</button>

    <div id="container">
        <img src="./assets/emoji-flowers-for-you.gif" id="love-gif-2">

        <div class="overlay" id="valentineBox">
            <h2 id="valentineQuestion"><strong>Will you be my valentines?</strong></h2>
            <p id="valentineMessage"></p>
            <div class="buttons">
            <button id="yesBtn">yes</button>
            <button id="noBtn">no</button>
            </div>
        </div>
    </div>

    <div id="typingText"></div>
</div>

<div id="yesCard" aria-live="polite"></div>

<audio id="dreamMusic" loop>
    <source src="./assets/dreaming.mp3" type="audio/mpeg">
</audio>

<audio id="nightmareMusic" loop>
    <source src="./assets/nightmare.mp3" type="audio/mpeg">
</audio>

<script>
    function encodeBase64(value) {
        return btoa(unescape(encodeURIComponent(value)));
    }

    function decodeBase64(value) {
        return decodeURIComponent(escape(atob(value)));
    }

    const urlParams = new URLSearchParams(window.location.search);
    const targetName = urlParams.get('t') ? decodeBase64(urlParams.get('t')) : null;
    const senderName = urlParams.get('s') ? decodeBase64(urlParams.get('s')) : null;

    if (targetName && senderName) {
        document.getElementById('formContainer').style.display = 'none';
        document.querySelector('.valentine-page').style.display = 'flex';
        
        document.getElementById('valentineQuestion').innerHTML = 
            `<strong>${targetName}, will you be my valentine?</strong>`;
        document.getElementById('valentineMessage').innerHTML = 
            `<strong>${senderName}</strong> made this just for <strong>${targetName}</strong>.`;
    } else {
        document.getElementById('formContainer').style.display = 'block';
    }

    document.getElementById('valentineForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const target = document.getElementById('targetName').value;
        const sender = document.getElementById('senderName').value;
        
        const baseUrl = window.location.origin + window.location.pathname;
        const linkUrl = `${baseUrl}?t=${encodeURIComponent(encodeBase64(target))}&s=${encodeURIComponent(encodeBase64(sender))}`;
        
        document.getElementById('generatedLink').value = linkUrl;
        document.getElementById('linkResult').style.display = 'block';
    });

    document.getElementById('copyBtn').addEventListener('click', function() {
        const linkInput = document.getElementById('generatedLink');
        linkInput.select();
        document.execCommand('copy');
        this.textContent = 'Copied!';
        setTimeout(() => {
            this.textContent = 'Copy Link';
        }, 2000);
    });

    const marqueeAssets = [
        "./assets/emoji-blush.gif",
        "./assets/emoji-love.gif",
        "./assets/emoji-smiley.gif",
        "./assets/giggling-laughing.gif",
        "./assets/heart-emoji.gif",
        "./assets/love-emoji.gif",
        "./assets/rose-emoji.gif",
        "./assets/smiley-emoji.gif"
    ];

    function spawnMarqueeItem(laneId) {
        const lane = document.getElementById(laneId);
        if (!lane) {
            return;
        }

        const img = document.createElement("img");
        const direction = Math.random() < 0.5 ? "move-left" : "move-right";
        const duration = 6 + Math.random() * 6;
        const delay = 0.2 + Math.random() * 0.8;

        img.className = `marquee-item ${direction}`;
        img.src = marqueeAssets[Math.floor(Math.random() * marqueeAssets.length)];
        img.alt = "";
        img.style.animationDuration = `${duration}s`;
        img.style.animationDelay = `${delay}s`;

        lane.appendChild(img);

        img.addEventListener("animationend", function() {
            img.remove();
            const nextDelay = 300 + Math.random() * 700;
            setTimeout(() => spawnMarqueeItem(laneId), nextDelay);
        });
    }

    let marqueeStarted = false;

    function startMarquee() {
        if (marqueeStarted) {
            return;
        }
        marqueeStarted = true;
        ["marqueeLaneTop", "marqueeLaneMid"].forEach((laneId, index) => {
            setTimeout(() => spawnMarqueeItem(laneId), index * 400);
        });
    }

    function stopMarquee() {
        marqueeStarted = false;
        const wrapper = document.getElementById("marqueeWrapper");
        if (wrapper) {
            wrapper.style.display = "none";
        }
        document.querySelectorAll(".marquee-item").forEach((item) => item.remove());
    }

    const doxxText = `IP. 92.28.211.234 N: 43.7462 W: 12.4893 SS Number: 6979191519182016 IPv6: fe80::5dcd::ef69::fb22::d9888%12 UPNP: Enabled DMZ: 10.112.42.15 MAC: 5A:78:3E:7E:00 ISP: Ucom Universal DNS: 8.8.8.8 ALT DNS: 1.1.1.8.1 DNS SUFFIX: Dlink WAN: 100.23.10.15 GATEWAY: 192.168.0.1 SUBNET MASK: 255.255.0.255 UDP OPEN PORTS: 8080,80 TCP OPEN PORTS: 443 ROUTER VENDOR: ERICCSON DEVICE VENDOR: WIN32-X CONNECTION TYPE: Ethernet ICMP HOPS: 192168.0.1 192168.1.1 100.73.43.4 host-132.12.32.167.ucom.com host-66.120.12.111.ucom.com 36.134.67.189 216.239.78.111 sof02s32-in-f14.1e100.net TOTAL HOPS: 8 ACTIVE SERVICES: [HTTP] 192.168.3.1:80=>92.28.211.234:80 [HTTP] 192.168.3.1:443=>92.28.211.234:443 [UDP] 192.168.0.1:788=>192.168.1:6557 [TCP] 192.168.1.1:67891=>92.28.211.234:345 [TCP] 192.168.52.43:7777=>192.168.1.1:7778 [TCP] 192.168.78.12:898=>192.168.89.9:667 EXTERNAL MAC: 6U:78:89:ER:O4 MODEM JUMPS: 64

IP. 92.28.511.239 N: 43.7462 W: 12.4893 SS Number: 6979191519182016 IPv6: fe80:5dcd::ef69::fb22::d9 888%12 UPNP: Enabled DMZ: 10.112.42.15 MAC: 5A:78:3:7E:00 ISP: Ucom Universal DNS: 8.8.8.8 ALT DNS: 1.1.1.8.1 DNS SUFFIX: Dlink WAN: 100.23.10.15 GATEWAY: 192.168.0.1 SUBNET MASK: 255.255.0.255 UDP OPEN PORTS: 8080,80 TCP OPEN PORTS: 443

IP. 92.28.211.234
N: 43.7462
W: 12.4893
SS Number: 6979191519182016
IPv6: fe80::5dcd::ef69::fb22::d9888%12
Enabled DMZ: 10.112.42.15
MAC: 5A:78:3E:7E:00
ISP: Ucom Universal DNS: 8.8.8.8
ALT DNS: 1.1.1.8.1
Dlink WAN: 100.23.10.15
GATEWAY: 192.168.0.1
SUBNET MASK: 255.255.0.255
UDP OPEN PORTS: 8080,80
TCP OPEN PORTS: 443 ROUTER
VENDOR: ERICCSON DEVICE VENDOR: WIN32-X CONNECTION TYPE: Ethernet ICMP`;

    document.getElementById("openBtn").addEventListener("click", function() {
        const gif = document.getElementById("love-gif-2");
        const music = document.getElementById("dreamMusic");
        const box = document.getElementById("valentineBox");
        const marqueeWrapper = document.getElementById("marqueeWrapper");

        this.style.display = "none";

        if (marqueeWrapper) {
            marqueeWrapper.style.display = "block";
        }
        startMarquee();

        gif.style.display = "block";
        gif.style.animation = "growFade 3s forwards";
        music.play();

        setTimeout(() => {
        box.style.display = "block";
        box.classList.add("show");
        }, 3000);
    });

    // Yes
    document.getElementById("yesBtn").addEventListener("click", function() {
        // alert("see you on valentines day <3");
        const card = document.getElementById("yesCard");
        const toName = targetName || "you";
        const fromName = senderName || "someone";

        card.innerHTML = `
            <strong>Yay!</strong><br>
            Hey there, <strong>${toName}</strong>, <strong>${fromName}</strong> here,You always make my day better, even when you don’t realize it.
            You are so beautiful, both inside and out.
            
            Your smile feels like home.
            Your laugh is my favorite sound in the world.
            The way you care about people makes me admire you even more.
            You have this light in you that makes everything around you brighter.
            
            Even on ordinary days, you make life feel special.
            Being able to talk to you is something I’m always grateful for.
            And no matter what happens, I hope you never forget how deeply appreciated and cherished you are.
            
            You really mean more to me than words can explain.
        `;
        card.classList.add("show");
    });

    document.addEventListener("click", function(event) {
        const card = document.getElementById("yesCard");
        const yesButton = document.getElementById("yesBtn");

        if (!card.classList.contains("show")) {
            return;
        }

        if (!card.contains(event.target) && event.target !== yesButton) {
            card.classList.remove("show");
        }
    });

    // No 
    document.getElementById("noBtn").addEventListener("click", function() {
        // alert("no test");
        stopMarquee();
        document.body.classList.add("rejected");
        document.getElementById("love-gif-2").style.display = "none";
        document.getElementById("valentineBox").style.display = "none";


        const dreamMusic = document.getElementById("dreamMusic");
        const nightmareMusic = document.getElementById("nightmareMusic");
        
        dreamMusic.pause();
        dreamMusic.currentTime = 0;
        nightmareMusic.play();

        const typingElement = document.getElementById("typingText");
        typingElement.style.display = "block";
        
        let index = 0;
        const typingSpeed = 5;
        
        function doxxingTime() {
        if (index < doxxText.length) {
            typingElement.textContent += doxxText.charAt(index);
            index++;
            setTimeout(doxxingTime, typingSpeed);
        }else{
            index = 0;
            typingElement.textContent = "";
            setTimeout(doxxingTime, 500);
        }
        }
        
    doxxingTime();
  });
</script>

</body>
</html>
